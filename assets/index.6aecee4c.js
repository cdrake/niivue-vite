import{N as b,v as u}from"./vendor.85b1a6ab.js";const p=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(l){if(l.ep)return;l.ep=!0;const o=e(l);fetch(l.href,o)}};p();const m="KGZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciB1PWFzeW5jKHI9e30sZSk9PntsZXQgdDtpZihlLnN0YXJ0c1dpdGgoImRhdGE6Iikpe2NvbnN0IG49YXRvYihlLnJlcGxhY2UoL15kYXRhOi4qP2Jhc2U2NCwvLCIiKSksYT1uZXcgVWludDhBcnJheShuLmxlbmd0aCk7Zm9yKGxldCBzPTA7czxuLmxlbmd0aDtzKyspYVtzXT1uLmNoYXJDb2RlQXQocyk7dD1hd2FpdCBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShhLHIpfWVsc2V7Y29uc3Qgbj1hd2FpdCBmZXRjaChlKSxhPW4uaGVhZGVycy5nZXQoIkNvbnRlbnQtVHlwZSIpfHwiIjtpZigiaW5zdGFudGlhdGVTdHJlYW1pbmciaW4gV2ViQXNzZW1ibHkmJmEuc3RhcnRzV2l0aCgiYXBwbGljYXRpb24vd2FzbSIpKXQ9YXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGVTdHJlYW1pbmcobixyKTtlbHNle2NvbnN0IHM9YXdhaXQgbi5hcnJheUJ1ZmZlcigpO3Q9YXdhaXQgV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUocyxyKX19cmV0dXJuIHQuaW5zdGFuY2UuZXhwb3J0c30sXz1yPT51KHIsIi9uaWl2dWUtdml0ZS9hc3NldHMvcHJvY2Vzcy1pbWFnZS4yMThlYWE0Zi53YXNtIik7bGV0IG89OCxnPTgsYj0zO2Z1bmN0aW9uIHkocixlKXtpZighcil0aHJvdyBuZXcgRXJyb3IoZSl9ZnVuY3Rpb24gcChyKXtyZXR1cm4gciYmKHImci0xKT09MH1mdW5jdGlvbiB2KHIpe3kocChyKSxgbm90IHBvd2VyIG9mIHR3bzogJHtyfWApfWZ1bmN0aW9uIEEocixlKXtyZXR1cm4gdihlKSwociZlLTEpPT0wfWZ1bmN0aW9uIFUocixlKXt5KEEocixlKSxgYmFkIGFsaWdubWVudDogJHtyfSAlICR7ZX1gKX1jbGFzcyBDe2NvbnN0cnVjdG9yKGUpe3RoaXMubWF4d29yZHM9ZS9vLHRoaXMuc3RhdGU9bmV3IFVpbnQ4QXJyYXkodGhpcy5tYXh3b3Jkcy9nKSx0aGlzLmFsbG9jYXRpb25zPW5ldyBNYXB9YWNxdWlyZShlLHQpe1UoZSxvKTtmb3IobGV0IG49MDtuPHQ7bis9byl7bGV0IGE9KGUrbikvbyxzPWE+PmIsaT0xPDwoYSZnLTEpO3koKHRoaXMuc3RhdGVbc10maSk9PTAsIndvcmQgaW4gdXNlIiksdGhpcy5zdGF0ZVtzXXw9aX10aGlzLmFsbG9jYXRpb25zLnNldChlLHQpfXJlbGVhc2UoZSl7eSh0aGlzLmFsbG9jYXRpb25zLmhhcyhlKSk7bGV0IHQ9dGhpcy5hbGxvY2F0aW9ucy5nZXQoZSk7dGhpcy5hbGxvY2F0aW9ucy5kZWxldGUoZSk7Zm9yKGxldCBuPTA7bjx0O24rPW8pe2xldCBhPShlK24pL28scz1hPj5iLGk9MTw8KGEmZy0xKTt0aGlzLnN0YXRlW3NdJj1+aX19fWNsYXNzIE17Y29uc3RydWN0b3Ioe2luaXRpYWw6ZT0yMDQ4LG1heGltdW06dD0yMDQ4fSl7dGhpcy5tZW1vcnk9bmV3IFdlYkFzc2VtYmx5Lk1lbW9yeSh7aW5pdGlhbDplLG1heGltdW06dH0pLHRoaXMudmVyaWZpZXI9bmV3IEModCo2NTUzNil9cmVjb3JkX21hbGxvYyhlLHQpe3RoaXMudmVyaWZpZXIuYWNxdWlyZShlLHQpfXJlY29yZF9mcmVlKGUpe3RoaXMudmVyaWZpZXIucmVsZWFzZShlKX1yZWFkX3N0cmluZyhlKXtsZXQgdD1uZXcgVWludDhBcnJheSh0aGlzLm1lbW9yeS5idWZmZXIpLG49W107Zm9yKGxldCBhPXRbZV07YTthPXRbKytlXSluLnB1c2goYSk7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ubil9bG9nKGUpe2NvbnNvbGUubG9nKGB3YXNtIGxvZzogJHtlfWApfWxvZ19pKGUsdCl7Y29uc29sZS5sb2coYHdhc20gbG9nOiAke2V9OiAke3R9YCl9ZW52KCl7cmV0dXJue21lbW9yeTp0aGlzLm1lbW9yeSx3YXNtX2xvZzplPT50aGlzLmxvZyh0aGlzLnJlYWRfc3RyaW5nKGUpKSx3YXNtX2xvZ19pOihlLHQpPT50aGlzLmxvZ19pKHRoaXMucmVhZF9zdHJpbmcoZSksdCl9fX1sZXQgYz1uZXcgTSh7aW5pdGlhbDoyNTYsbWF4aW11bToyMDQ4fSksJD1fKHtlbnY6Yy5lbnYoKX0pO2FkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLHI9PnskLnRoZW4oZT0+e2NvbnN0IHQ9ci5kYXRhWzBdLG49ci5kYXRhWzFdLGE9ci5kYXRhWzJdLHM9ci5kYXRhWzNdO2xldCBpPWUud2FsbG9jKGEubGVuZ3RoKzEpO2MucmVjb3JkX21hbGxvYyhpLGEubGVuZ3RoKzEpO2xldCBoPW5ldyBVaW50OEFycmF5KGEubGVuZ3RoKzEpO2ZvcihsZXQgZD0wO2Q8YS5sZW5ndGg7ZCsrKWhbZF09YS5jaGFyQ29kZUF0KGQpO25ldyBVaW50OEFycmF5KGUubWVtb3J5LmJ1ZmZlcixpLGEubGVuZ3RoKzEpLnNldChoKTtsZXQgdz10Lm54KnQubnkqdC5ueip0Lm50LGw9ZS53YWxsb2Modyp0LmJwdik7Yy5yZWNvcmRfbWFsbG9jKGwsdyp0LmJwdik7bGV0IG09bmV3IFVpbnQ4QXJyYXkoZS5tZW1vcnkuYnVmZmVyLGwsdyp0LmJwdik7bS5zZXQobmV3IFVpbnQ4QXJyYXkobikpO2xldCBmPWUubmlpbWF0aChsLHQuZGF0YXR5cGVDb2RlLHQubngsdC5ueSx0Lm56LHQubnQsdC5keCx0LmR5LHQuZHosdC5kdCxpKTtpZihmIT0wKXtjb25zb2xlLmVycm9yKCIgLT4gJyIsYSwiIGdlbmVyYXRlZCBhIGZhdGFsIGVycm9yOiAiLGYpO3JldHVybn1tPW5ldyBVaW50OEFycmF5KGUubWVtb3J5LmJ1ZmZlcixsLHcqdC5icHYpO2xldCB6PW5ldyBVaW50OEFycmF5KG0sMCx3KnQuYnB2KTtwb3N0TWVzc2FnZSh7aWQ6dC5pZCxpbWFnZUJ5dGVzOnosY21kOmEsaXNOZXdMYXllcjpzfSksYy5yZWNvcmRfZnJlZShpKSxlLndmcmVlKGkpLGMucmVjb3JkX2ZyZWUobCksZS53ZnJlZShsKX0pfSl9KSgpOwo=",i=typeof window!="undefined"&&window.Blob&&new Blob([atob(m)],{type:"text/javascript;charset=utf-8"});function y(){const t=i&&(window.URL||window.webkitURL).createObjectURL(i);try{return t?new Worker(t,{}):new Worker("data:application/javascript;base64,"+m,{type:"module"})}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}function Z(t){let e=d.volumes[0].clone(),n=e.getImageMetadata();const l=!0,a=document.getElementById("command").value;t.postMessage([n,e.img.buffer,a,l])}async function r(){s.onmessage=t=>{const c=t.data.id;let e=d.volumes.find(o=>o.id==c);if(!e){console.log("image not found");return}const n=t.data.isNewLayer;n&&(e=e.clone(),e.id=u());let l=t.data.imageBytes;switch(e.hdr.datatypeCode){case e.DT_UNSIGNED_CHAR:e.img=new Uint8Array(l);break;case e.DT_SIGNED_SHORT:e.img=new Int16Array(l);break;case e.DT_FLOAT:e.img=new Float32Array(l);break;case e.DT_DOUBLE:throw"datatype "+e.hdr.datatypeCode+" not supported";case e.DT_RGB:e.img=new Uint8Array(l);break;case e.DT_UINT16:e.img=new Uint16Array(l);break;case e.DT_RGBA32:e.img=new Uint8Array(l);break;default:throw"datatype "+e.hdr.datatypeCode+" not supported"}e.trustCalMinMax=!1,e.calMinMax(),d.volumes.length,n?d.setVolume(e,d.volumes.length):d.volumes.indexOf(e),console.log("image processed")}}function G(){Z(s)}async function h(){await r();let t=document.getElementById("process-image-button");t.innerText="process",t.disabled=!1,t.onclick=G}let X=[{url:"./mni152.nii.gz",volume:{hdr:null,img:null},name:"some_image",colorMap:"gray",opacity:1,visible:!0}],s=new y;h();let W=document.getElementById("gl");const d=new b;d.attachToCanvas(W);d.loadVolumes(X);
